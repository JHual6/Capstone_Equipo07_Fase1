/* SCRIPT 8: LIMPIEZA DE FUNCIONES TEMPORALES
   Objetivo: Borrar los generadores para dejar la BD limpia,
   PERO MANTENIENDO LOS DATOS (Ventas, Clima, etc.)
*/

-- 1. Borrar las funciones de simulación (ya cumplieron su misión)
DROP FUNCTION IF EXISTS generar_objetivos_inteligentes(DATE, DATE);
DROP FUNCTION IF EXISTS simular_negocio_realista(DATE, DATE);

-- 2. Borrar tablas temporales (por si quedó alguna en memoria)
DROP TABLE IF EXISTS temp_ventas_totales;
DROP TABLE IF EXISTS temp_clima_import;

-- 3. (Opcional) Si quieres borrar la tabla Velorios solo si quedó vacía (pero la nuestra tiene datos)
-- No borrar nada más.

------------------------------------------------------------
-- 4. VERIFICACIÓN FINAL (El "Examen" de que todo salió bien)
------------------------------------------------------------
SELECT 'Ventas Generadas' as tabla, COUNT(*) as cantidad FROM Ventas
UNION ALL
SELECT 'Detalle de Ventas', COUNT(*) FROM Detalle_Ventas
UNION ALL
SELECT 'Clima Histórico', COUNT(*) FROM Clima
UNION ALL
SELECT 'Velorios Registrados', COUNT(*) FROM Velorios WHERE cantidad_velorio > 0
UNION ALL
SELECT 'Compras a Proveedores', COUNT(*) FROM Compras;